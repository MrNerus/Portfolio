<!-- <!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Draggable Div — Demo</title>
  <style>
    :root{--bg:#f3f4f6;--card:#111827;--accent:#3b82f6}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);display:flex;align-items:center;justify-content:center}
    .stage{
      width:900px;height:480px;border-radius:12px;background:white;box-shadow:0 8px 30px rgba(17,24,39,.08);padding:20px;display:flex;flex-direction:column;gap:12px}
    .stage-header{display:flex;align-items:center;justify-content:space-between}
    .title{font-weight:600;color:var(--card)}
    .area{flex:1; border:2px dashed rgba(17,24,39,.06); border-radius:8px; position:relative; overflow:hidden; background: linear-gradient(180deg, rgba(59,130,246,0.03), transparent)}
    /* draggable box */
    .box{
      width:110px;height:110px;border-radius:12px;background:linear-gradient(180deg,var(--accent),#2563eb);color:white;display:flex;flex-direction:column;align-items:center;justify-content:center;position:absolute;touch-action:none;user-select:none;cursor:grab;box-shadow:0 8px 24px rgba(37,99,235,.24);
      transform: translate(20px,20px);
    }
    .box:active{cursor:grabbing}
    .handle{width:100%;padding:8px 10px;border-bottom:1px solid rgba(255,255,255,0.12);font-weight:600;font-size:14px;text-align:center}
    .content{flex:1;display:flex;align-items:center;justify-content:center;padding:6px}
    .info{font-size:12px;color:rgba(255,255,255,0.9)}
    .hint{font-size:13px;color:#374151}
    .controls{display:flex;gap:8px}
    button{background:#111827;color:white;border:0;padding:6px 10px;border-radius:8px;cursor:pointer}
  </style>
</head>
<body>
  <div class="stage">
    <div class="stage-header">
      <div class="title">Draggable Div — Pointer / Touch friendly</div>
      <div class="controls">
        <button id="centerBtn">Center</button>
        <button #resetBtn id="resetBtn">Reset</button>
      </div>
    </div>
    <div class="area" id="area">
      <div class="box" #box id="box" role="application" aria-label="Draggable box" (mousedown)="$event.preventDefault(); mouseDown($event)" (mouseup)="$event.preventDefault(); mouseUp()" (mousemove)="$event.preventDefault(); mouseMove($event)">
        <div class="handle">Drag me</div>
        <div class="content"><div class="info">x: <span id="x">20</span>, y: <span id="y">20</span></div></div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const box = document.getElementById('box');
      const area = document.getElementById('area');
      const xEl = document.getElementById('x');
      const yEl = document.getElementById('y');
      const centerBtn = document.getElementById('centerBtn');
      const resetBtn = document.getElementById('resetBtn');

      // Track translate values
      let translate = {x:20, y:20};
      // Pointer drag state
      let isDragging = false;
      let start = {x:0,y:0};
      let origin = {x:0,y:0};

      function clamp(v,min,max){ return Math.min(Math.max(v,min),max); }

      function updatePosition(){
        box.style.transform = `translate(${translate.x}px, ${translate.y}px)`;
        xEl.textContent = Math.round(translate.x);
        yEl.textContent = Math.round(translate.y);
      }

      function getBounds(){
        const areaRect = area.getBoundingClientRect();
        const boxRect = box.getBoundingClientRect();
        const minX = 0;
        const minY = 0;
        const maxX = areaRect.width - boxRect.width;
        const maxY = areaRect.height - boxRect.height;
        return {minX,minY,maxX,maxY};
      }

      // Pointer events (works for mouse + touch + pen)
      box.addEventListener('pointerdown', (ev)=>{
        ev.preventDefault();
        box.setPointerCapture(ev.pointerId);
        isDragging = true;
        start = {x: ev.clientX, y: ev.clientY};
        origin = {x: translate.x, y: translate.y};
        box.style.transition = 'none';
      });

      window.addEventListener('pointermove', (ev)=>{
        if(!isDragging) return;
        const dx = ev.clientX - start.x;
        const dy = ev.clientY - start.y;
        const bounds = getBounds();
        translate.x = clamp(origin.x + dx, bounds.minX, bounds.maxX);
        translate.y = clamp(origin.y + dy, bounds.minY, bounds.maxY);
        updatePosition();
      });

      window.addEventListener('pointerup', (ev)=>{
        if(!isDragging) return;
        isDragging = false;
        try{ box.releasePointerCapture(ev.pointerId); } catch(e){}
        // small bounce-back animation if at edges
        box.style.transition = 'transform 220ms cubic-bezier(.2,.8,.2,1)';
        updatePosition();
        console.log('Dropped at', translate);
      });

      // Buttons
      centerBtn.addEventListener('click', ()=>{
        const areaRect = area.getBoundingClientRect();
        const boxRect = box.getBoundingClientRect();
        translate.x = Math.round((areaRect.width - boxRect.width)/2);
        translate.y = Math.round((areaRect.height - boxRect.height)/2);
        box.style.transition = 'transform 260ms cubic-bezier(.2,.9,.2,1)';
        updatePosition();
      });

      resetBtn.addEventListener('click', ()=>{
        translate.x = 20; translate.y = 20;
        box.style.transition = 'transform 260ms cubic-bezier(.2,.9,.2,1)';
        updatePosition();
      });

      // Resize guard: keep inside when window changes
      window.addEventListener('resize', ()=>{
        const bounds = getBounds();
        translate.x = clamp(translate.x, bounds.minX, bounds.maxX);
        translate.y = clamp(translate.y, bounds.minY, bounds.maxY);
        box.style.transition = 'transform 240ms ease';
        updatePosition();
      });

      // initialize
      updatePosition();

      // Accessibility: keyboard nudges when box has focus
      box.tabIndex = 0;
      box.addEventListener('keydown', (ev)=>{
        const step = ev.shiftKey ? 20 : 8;
        const bounds = getBounds();
        if(ev.key === 'ArrowLeft') { translate.x = clamp(translate.x - step, bounds.minX, bounds.maxX); updatePosition(); ev.preventDefault(); }
        if(ev.key === 'ArrowRight'){ translate.x = clamp(translate.x + step, bounds.minX, bounds.maxX); updatePosition(); ev.preventDefault(); }
        if(ev.key === 'ArrowUp')   { translate.y = clamp(translate.y - step, bounds.minY, bounds.maxY); updatePosition(); ev.preventDefault(); }
        if(ev.key === 'ArrowDown') { translate.y = clamp(translate.y + step, bounds.minY, bounds.maxY); updatePosition(); ev.preventDefault(); }
      });

    })();
  </script>
</body>
</html> -->


<div class="box" #box id="box" role="application" aria-label="Draggable box" (mousedown)="$event.preventDefault(); mouseDown($event)" (mouseup)="$event.preventDefault(); mouseUp()" (mousemove)="$event.preventDefault(); mouseMove($event)">
  <div class="handle">Drag me</div>
  <div class="content"><div class="info">x: <span id="x">20</span>, y: <span id="y">20</span></div></div>
</div>